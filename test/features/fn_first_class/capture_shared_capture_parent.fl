fn a() {
    var x = 1;
    var y = 2;
    var z = 3;  
    fn b() {
        var w = 4;
        print [y];
        fn c() {
            print [x, y, w];
        }
        fn d() {
            print [w, y];
        }
        return [c, d];
    }
    fn e() {
        print [y, x, z];
    }
    return [b, e];
}

fn main() {
    var r1 = a();
    
    # print [2]
    var b = r1[0];
    
    var r2 = b();

    var c = r2[0];
    # print [1, 2, 4]
    c();

    var d = r2[1];
    # print [4, 2]
    d();

    var e = r1[1];
    # print [2, 1, 3]
    e();
}